apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'application'

mainClassName = "org.kiwi.dropwizard.HelloService"

dependencies {
    repositories {
        mavenCentral()
    }

    compile("com.yammer.dropwizard:dropwizard-core:0.6.2")
}

run {
    args 'server', 'src/main/resources/hello.yaml'
}

task uberjar(type: Jar, dependsOn: jar) {
    classifier = "standalone"

    from files(sourceSets.main.output.classesDir)
    from files(sourceSets.main.output.resourcesDir)

    from configurations.runtime.asFileTree.files.collect { zipTree(it) }

    exclude("META-INF/*.SF")
    exclude("META-INF/*.DSA")
    exclude("META-INF/*.RSA")

    manifest {
        attributes 'Main-Class': mainClassName
    }
}